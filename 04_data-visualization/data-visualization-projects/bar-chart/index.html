<!doctype html>
<html lang="en">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Visualize Data with a Bar Chart</title>
</head>
<body>
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <script>
    let dataset; // [[DATE, VALUE (billion USD)], [ ], [ ]... ]
    d3.json('https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/GDP-data.json')
      .then((data) => dataset = data.data)
    .then(() => {
    const w = 1000;
    const h = 500;
    const padding = 50;

    const xScale = d3.scaleLinear()
                     .domain([0, d3.max(dataset, (d, i) => i)])
                     .range([padding, w - padding]);

    const yScale = d3.scaleLinear()
                     .domain([0, d3.max(dataset, (d) => d[1])])
                     .range([h - padding, padding]);

    const svg = d3.select('body')
                  .append('svg')
                  .attr('width', w)
                  .attr('height', h);

    svg.selectAll('rect')
       .data(dataset)
       .enter()
       .append('rect')
       .attr('class', 'bar')
       .attr('data-date', (d) => d[0])
       .attr('data-gdp', (d) => d[1])
       .attr('x', (d, i) => xScale(i))
       .attr('y', (d) => yScale(d[1]))
       .attr('width', `${w / dataset.length}`)
       .attr('height', (d) => h - padding - yScale(d[1]));
    
    const xAxis = d3.axisBottom(xScale);

    const yAxis = d3.axisLeft(yScale);

    svg.append('g')
       .attr('id', 'x-axis')
       .attr('transform', `translate(0, ${h - padding})`)
       .call(xAxis);

    svg.append('g')
       .attr('id', 'y-axis')
       .attr('transform', `translate(${padding}, 0)`)
       .call(yAxis);
    });
  </script>
  <script src= "https://cdn.freecodecamp.org/testable-projects-fcc/v1/bundle.js"></script>
</body>
</html>
